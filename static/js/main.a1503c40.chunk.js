(this.webpackJsonpElectornicShop=this.webpackJsonpElectornicShop||[]).push([[0],{31:function(e,t,c){},32:function(e,t,c){},33:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){"use strict";c.r(t);var s=c(4),a=c.n(s),n=c(23),i=c.n(n),r=(c(31),c(14)),o=c(8),l=(c(32),c(33),c(2));const d=Object(s.createContext)(),j=e=>{let{reducer:t,initialState:c,children:a}=e;return Object(l.jsx)(d.Provider,{value:Object(s.useReducer)(t,c),children:a})},h=()=>Object(s.useContext)(d);var u=function(e){let{id:t,title:c,image:s,price:a,rating:n}=e;const[{basket:i},o]=h();return Object(l.jsxs)("div",{className:"product",children:[Object(l.jsxs)("div",{className:"productInfo",children:[Object(l.jsx)("p",{children:c}),Object(l.jsxs)("p",{className:"productPrice",children:[Object(l.jsx)("small",{children:"$"}),Object(l.jsx)("strong",{children:a})]}),Object(l.jsxs)("div",{className:"productRating",children:[Array(n).fill().map(((e,t)=>Object(l.jsx)("i",{className:"fas fa-star"},t))),Array(5-n).fill().map(((e,t)=>Object(l.jsx)("i",{className:"far fa-star"},t)))]})]}),t?Object(l.jsx)(r.b,{to:"/product/".concat(t),children:Object(l.jsx)("img",{src:s,alt:t})}):Object(l.jsx)("img",{src:s,alt:""}),Object(l.jsxs)("button",{onClick:()=>{o({type:"ADD_TO_BASKET",item:{id:t,title:c,image:s,price:a,rating:n}})},children:[Object(l.jsx)("i",{className:"fas fa-shopping-basket"})," Add to Basket"]})]})};const b=c(26).a.initializeApp({apiKey:"AIzaSyBbCsDUsoDnj1aPWhdkTKzSs4gKe9u1UFY",authDomain:"onlineshop-540fc.firebaseapp.com",projectId:"onlineshop-540fc",storageBucket:"onlineshop-540fc.appspot.com",messagingSenderId:"503605397907",appId:"1:503605397907:web:7de275e74c7ac71d2cc066"}).firestore();var m=function(){const[e,t]=Object(s.useState)([]);Object(s.useEffect)((()=>{document.title="ElectronicShop";const e=b.collection("products").onSnapshot((e=>{const c=e.docs.map((e=>({id:e.id,product:e.data()})));t(c)}));return()=>e()}),[]);const c=((e,t)=>{let c=[];for(;e.length;)c.push(e.splice(0,t));return c})([...e],3);return Object(l.jsx)("div",{className:"home",children:Object(l.jsxs)("div",{className:"homeContainer",children:[Object(l.jsx)("img",{className:"homeImage",src:"https://images-na.ssl-images-amazon.com/images/G/15/kindle/journeys/MDUxZTAzODMt/MDUxZTAzODMt-MTlkMjQ1MmEt-w1500._CB418674021_.jpg",alt:""}),c.map(((e,t)=>Object(l.jsx)("div",{className:"homeRow",children:e.map((e=>Object(l.jsx)(u,{id:e.id,title:e.product.title,price:e.product.price,rating:e.product.rating,image:e.product.image},e.id)))},t)))]})})};c(46);var p=function(){const[{basket:e}]=h();return Object(s.useEffect)((()=>{const e=document.querySelector("#themeToggle i"),t=localStorage.getItem("theme");"light"===t&&(e.classList.add("fa-sun"),e.classList.remove("fa-moon"),document.querySelector("body").classList.add(t)),e.addEventListener("click",(()=>{e.classList.contains("fa-moon")?(e.classList.add("fa-sun"),e.classList.remove("fa-moon"),localStorage.setItem("theme","light")):(e.classList.add("fa-moon"),e.classList.remove("fa-sun"),localStorage.clear()),document.querySelector("body").classList.toggle("light")}))}),[]),Object(l.jsxs)("div",{className:"header",children:[Object(l.jsx)(r.b,{className:"link headerTitle",to:"/",children:Object(l.jsx)("h1",{className:"headerLogo",children:"ElectronicShop"})}),Object(l.jsxs)("div",{className:"headerSearchContainer",children:[Object(l.jsx)("input",{className:"headerSearchInput",type:"text"}),Object(l.jsx)("i",{className:"fas fa-search headerSearchIcon"})]}),Object(l.jsx)("div",{className:"break"}),Object(l.jsx)("div",{className:"headerNavContainer",children:Object(l.jsx)(r.b,{to:"/checkout",className:"link",children:Object(l.jsxs)("div",{className:"headerOptionBasket",children:[Object(l.jsx)("i",{className:"fas fa-shopping-basket"}),Object(l.jsx)("span",{className:"headerOptionLineTwo headerBasketCount",children:null===e||void 0===e?void 0:e.length})]})})}),Object(l.jsx)("div",{id:"themeToggle",className:"headerTheme",children:Object(l.jsx)("i",{className:"far fa-moon"})})]})},O=(c(47),c(48),c(25)),x=c.n(O);const g=e=>null===e||void 0===e?void 0:e.reduce(((e,t)=>t.price+e),0);var f=(e,t)=>{switch(t.type){case"ADD_TO_BASKET":return{...e,basket:[...e.basket,t.item]};case"REMOVE_FROM_BASKET":const c=e.basket.findIndex((e=>e.id===t.id));let s=[...e.basket];return c>=0?s.splice(c,1):alert("Cannot remove product. Not in cart"),{...e,basket:s};case"EMPTY_BASKET":return{...e,basket:[]};default:return e}};var v=function(){Object(o.g)();const[{basket:e},t]=h();return console.log(e),Object(l.jsxs)("div",{className:"subtotal",children:[Object(l.jsx)(x.a,{renderText:t=>Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("p",{children:["Subtotal (",e.length," items): ",Object(l.jsx)("strong",{children:t})]})}),decimalScale:2,value:1.13*g(e),displayType:"text",thousandSeparator:!0,prefix:"$"}),Object(l.jsx)("button",{onClick:t=>{0!==e.length?alert("Purchase successful !"):alert("Please add at least 1 item to make a purchase")},children:"Proceed to checkout"})]})};c(50);var k=function(e){let{id:t,image:c,title:s,price:a,rating:n,hideButton:i}=e;const[{basket:r},o]=h();return Object(l.jsxs)("div",{className:"checkoutProduct",children:[Object(l.jsx)("img",{className:"checkoutProductImage",src:c}),Object(l.jsxs)("div",{className:"checkoutProductInfo",children:[Object(l.jsx)("p",{className:"checkoutProductTitle",children:s}),Object(l.jsxs)("p",{className:"checkoutProductPrice",children:[Object(l.jsx)("small",{children:"$"}),Object(l.jsx)("strong",{children:a})]}),Object(l.jsxs)("div",{className:"checkoutProductRating",children:[Array(n).fill().map(((e,t)=>Object(l.jsx)("i",{className:"fas fa-star"},t))),Array(5-n).fill().map(((e,t)=>Object(l.jsx)("i",{className:"far fa-star"},t)))]}),!i&&Object(l.jsxs)("button",{onClick:()=>{o({type:"REMOVE_FROM_BASKET",id:t})},children:[Object(l.jsx)("i",{className:"fas fa-trash-alt"})," Remove from Basket"]})]})]})};var N=function(){const[{basket:e}]=h();return Object(s.useEffect)((()=>{document.title="Cart | ElectronicShop"}),[]),Object(l.jsxs)("div",{className:"checkout",children:[Object(l.jsx)("div",{className:"checkoutLeft",children:Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"Hello"}),Object(l.jsx)("h2",{className:"checkoutTitle",children:"Your shopping Basket"}),e.map(((e,t)=>Object(l.jsx)(k,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating},t)))]})}),Object(l.jsx)("div",{className:"checkoutRight",children:Object(l.jsx)(v,{})})]})};c(51);var S=function(){const{productid:e}=Object(o.h)(),[t,c]=Object(s.useState)({});return Object(s.useEffect)((()=>{e&&b.collection("products").doc(e).get().then((e=>{c(e.data())}))}),[e]),t&&Object(l.jsx)("div",{className:"singleProductContainerOuter",children:Object(l.jsxs)("div",{className:"singleProductContainer",children:[Object(l.jsx)(u,{title:null===t||void 0===t?void 0:t.title,price:null===t||void 0===t?void 0:t.price,rating:(null===t||void 0===t?void 0:t.rating)||0,image:null===t||void 0===t?void 0:t.image}),console.log(t),Object(l.jsx)("div",{className:"productDescription",children:Object(l.jsx)("p",{children:null===t||void 0===t?void 0:t.description})})]})})};c(52);var w=function(){return Object(l.jsx)("footer",{id:"footer",className:"footer",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50px"},children:Object(l.jsx)("a",{href:"https://github.com/aditbaks/ElectronicShop",target:"_blank",rel:"noopener noreferrer",children:"Made by Aditya Bakshi"})})};c(53);var y=function(){const[{user:e,basket:t},c]=h();return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(r.a,{children:Object(l.jsxs)(o.d,{children:[Object(l.jsxs)(o.b,{exact:!0,path:"/checkout",children:[Object(l.jsx)(p,{}),Object(l.jsx)(N,{}),Object(l.jsx)(w,{})]}),Object(l.jsxs)(o.b,{exact:!0,path:"/product/:productid",children:[Object(l.jsx)(p,{}),Object(l.jsx)(S,{}),Object(l.jsx)(w,{})]}),Object(l.jsxs)(o.b,{exact:!0,path:"/",children:[Object(l.jsx)(p,{}),Object(l.jsx)(m,{}),Object(l.jsx)(w,{})]}),Object(l.jsx)(o.b,{children:Object(l.jsx)(o.a,{to:"/"})})]})})})};const E=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function T(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const c=e.installing;null!=c&&(c.onstatechange=()=>{"installed"===c.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}i.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(j,{initialState:{basket:[],user:null},reducer:f,children:Object(l.jsx)(y,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/ElectronicShop",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("/ElectronicShop","/service-worker.js");E?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((c=>{const s=c.headers.get("content-type");404===c.status||null!=s&&-1===s.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):T(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):T(t,e)}))}}({onUpdate:e=>{const t=e.waiting;t&&(t.addEventListener("statechange",(e=>{"activated"===e.target.state&&(alert("New Verison Found. Refressing..."),window.location.reload())})),t.postMessage({type:"SKIP_WAITING"}))}})}},[[54,1,2]]]);
//# sourceMappingURL=main.a1503c40.chunk.js.map